package com.lewis.boxgame.Views;

import com.badlogic.gdx.math.Rectangle;
import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.physics.box2d.World;
import com.badlogic.gdx.utils.Array;
import com.lewis.boxgame.Models.Player;
import com.lewis.boxgame.Models.Recharger;
import com.lewis.boxgame.Models.Tile;

public class Level {

	private World world;
	private Player player;

	private Array<Tile> tiles;
	private Array<Recharger> rechargers;
	private Array<Rectangle> floorTiles;

	public Level(World world, Player player){
		this.world = world; 
		this.player = player;

		tiles = new Array<Tile>();
		rechargers = new Array<Recharger>();
		floorTiles = new Array<Rectangle>();

		readLevel();
	}

	public Array<Tile> getTiles(){
		return tiles;
	}

	public Array<Recharger> getRechargers(){
		return rechargers;
	}
	
	public Array<Rectangle> getFloorTiles(){
		return floorTiles;
	}

	public void readLevel(){

		System.out.println("Loading Map Array...");
		
		String[] map = new String[46];

		map[0] =  "11111111111111111111111111111111111111111111111111111111111111100000000";
		map[1] =  "13333333333333333333333333333333333333333333333333333333333333100000000";
		map[2] =  "13333333333333333333333333333333333333333333333333333333333333100000000";
		map[3] =  "13333333333333333333333333333333333333333333333333333333333333100000000";
		map[4] =  "13333333333333333333333333333333333333333333333333333333333333100000000";
		map[5] =  "11111111111111111111111111111333331111111111111111110000000000100000000";
		map[6] =  "00000000000000000000000000001332331000000000000000010000000000100000000";
		map[7] =  "00000000000000000000000000001333331000000000000000010000000000100000000";
		map[8] =  "00000000000000000000000000001333331000000000000000010000000000100000000";
		map[9] =  "000000000000000000000000000 1111111000000000000000010000000000111111111";
		map[10] = "00001111111100000000000000000000000000000000000000010000000000100000001";
		map[11] = "00001000000100000000000000000000000000000000000000010000000000000000001";
		map[12] = "00001000000100000000000000000000000000000000000000010000000000000020001";
		map[13] = "00001000000100000000000000000000000000000000000000010000000000000000001";
		map[14] = "00001000000100000000000000000000000000000000000000010000000000100000001";
		map[15] = "00001000000100000000000000000000000000000000000000010000000000111111111";
		map[16] = "00001000000100000000000000000000000000000000000000010000000000100000000";
		map[17] = "00001000000100000000000000000000000000000000000000010000000000100000000";
		map[18] = "00001000000100000000011111111111111111111111111111110000000000100000000";
		map[19] = "00001000000111111111110000000000000000000000000000000000000000100000000";
		map[20] = "00001000000000000000000000000000000000000000000000000000000000100000000";
		map[21] = "00001000000000000000000000000000000000000000000000000000000000100000000";
		map[22] = "00001000000000000000000000000000000000000000000000000000000000100000000";
		map[23] = "00001111100000111111110000000001111111111111111111111111111111100000000";
		map[24] = "00000000100200100000010000000001000000000000000000000000000000000000000";
		map[25] = "00000000100000100000010000000001000000000000000000000000000000000000000";
		map[26] = "00000000100000100000010000000001111111111111111111111111111111111110000";
		map[27] = "00000000111111100000010000000000000000000000000000000000000000000010000";
		map[28] = "00000000000000000000010000000000000000000000000000000000000000000010000";
		map[29] = "00000000000000000000010000000000000000000000000000000000000000000010000";
		map[30] = "00000000000000000000011111111111111111111111111110000000111111111110000";
		map[31] = "00000000000000000000000000000000000000000000000010000000100000000000000";
		map[32] = "00000000000000000000001111111000000000000000000010000000100000000000000";
		map[33] = "00000000000000000000001000001000000000000000000010000000100000000000000";
		map[34] = "00000000000000000000001000001000000000000000000010000000100000000000000";
		map[35] = "00000000000000000000001002001000000000000000000010000000100000000000000";
		map[36] = "11111111111111111111111000001111111111111111111110000000111111111111110";
		map[37] = "10000000000000000000000000000000000000000000000000000000000000000000010";
		map[38] = "10000000000000000000000000000000000000000000000000000000000000000000010";
		map[39] = "10000000000000000000000000000000000000000000000000000000000000000000010";
		map[40] = "10000000000000000000000000000000000000000000000000000000000000000000010";
		map[41] = "10000000011111111111111111111111111111111111111110000000111111110000010";
		map[42] = "10000000010000000000000000000000000000000000000010000000100000010020010";
		map[43] = "10000000010000000000000000000000000000000000000010000000100000010000010";
		map[44] = "10000000010000000000000000000000000000000000000010000000100000010000010";
		map[45] = "10000000010000000000000000000000000000000000000011111111100000011111110";

		System.out.println("Map Loaded, reading in tiles...");
		
		int y = 1;

		for(int i = 0; i < map.length; i++){

			for(int x = 0; x < map[i].length(); x++){

				char c = map[i].charAt(x);		

				// Create the level
				switch(c){
				case '0':
					break;

				case '1':
					tiles.add(new Tile(world, new Vector2(x * 16,y * 16)));
					break;

				case '2':
					rechargers.add(new Recharger(world, new Vector2(x * 16,y * 16), player));
					break;
					
				case '3':
					floorTiles.add(new Rectangle(x * 16, y * 16, 16, 16));
					break;

				default:
					break;
				}
			}
			y--;
		}
		
		System.out.println("Map created!");
	}

}
